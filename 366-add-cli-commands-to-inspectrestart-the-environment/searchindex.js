Search.setIndex({"docnames": ["developer/explanations/architecture", "developer/explanations/decisions", "developer/explanations/decisions/0001-record-architecture-decisions", "developer/explanations/decisions/0002-no-queues", "developer/explanations/decisions/0003-api-case", "developer/explanations/events", "developer/explanations/lifecycle", "developer/explanations/type_validators", "developer/how-to/build-docs", "developer/how-to/contribute", "developer/how-to/lint", "developer/how-to/make-release", "developer/how-to/run-tests", "developer/how-to/static-analysis", "developer/how-to/update-tools", "developer/index", "developer/reference/standards", "developer/tutorials/dev-install", "developer/tutorials/dev-run", "genindex", "index", "user/explanations/docs-structure", "user/how-to/add-plans-and-devices", "user/how-to/configure-app", "user/how-to/run-cli", "user/how-to/run-container", "user/how-to/write-plans", "user/index", "user/reference/api", "user/reference/cli", "user/reference/messaging-spec", "user/reference/rest-spec", "user/tutorials/installation", "user/tutorials/quickstart"], "filenames": ["developer/explanations/architecture.rst", "developer/explanations/decisions.rst", "developer/explanations/decisions/0001-record-architecture-decisions.rst", "developer/explanations/decisions/0002-no-queues.rst", "developer/explanations/decisions/0003-api-case.rst", "developer/explanations/events.rst", "developer/explanations/lifecycle.rst", "developer/explanations/type_validators.rst", "developer/how-to/build-docs.rst", "developer/how-to/contribute.rst", "developer/how-to/lint.rst", "developer/how-to/make-release.rst", "developer/how-to/run-tests.rst", "developer/how-to/static-analysis.rst", "developer/how-to/update-tools.rst", "developer/index.rst", "developer/reference/standards.rst", "developer/tutorials/dev-install.rst", "developer/tutorials/dev-run.rst", "genindex.rst", "index.rst", "user/explanations/docs-structure.rst", "user/how-to/add-plans-and-devices.rst", "user/how-to/configure-app.rst", "user/how-to/run-cli.rst", "user/how-to/run-container.rst", "user/how-to/write-plans.rst", "user/index.rst", "user/reference/api.rst", "user/reference/cli.rst", "user/reference/messaging-spec.rst", "user/reference/rest-spec.rst", "user/tutorials/installation.rst", "user/tutorials/quickstart.rst"], "titles": ["Architecture", "Architectural Decision Records", "1. Record architecture decisions", "2. No Queues", "2. API Model Case", "Events Emitted by the Worker", "Lifecycle of a Plan", "Type Validators", "Build the docs using sphinx", "Contributing to the project", "Run linting using pre-commit", "Make a release", "Run the tests using pytest", "Run static analysis using mypy", "Update the tools", "Developer Guide", "Standards", "Developer install", "Run/Debug in a Developer Environment", "API Index", "blueapi", "About the documentation", "Add Plans and Devices to your Blueapi Environment", "Configure the application", "Control the Worker via the CLI", "Run in a container", "Writing Bluesky plans for Blueapi", "User Guide", "API", "Command-Line Interface", "Messaging Specification", "REST Specification", "Installation", "Quickstart Guide"], "terms": {"blueapi": [0, 5, 6, 7, 17, 18, 23, 24, 25, 27, 30, 31, 32, 33], "perform": 0, "number": [0, 5, 6, 9, 11, 25, 26, 28, 30], "task": [0, 3, 15, 29, 30, 31], "manag": [0, 12], "blueski": [0, 5, 6, 7, 20, 22, 27, 30, 33], "runengin": [0, 5, 6, 26], "give": [0, 5], "instruct": [0, 17, 18], "handl": [0, 5, 9, 10], "its": [0, 6, 22, 25, 26, 30, 31, 32], "error": [0, 3, 5, 6, 12, 24, 30, 31], "tradition": [0, 5], "thi": [0, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 14, 16, 17, 20, 21, 22, 23, 24, 26, 28, 30, 31, 32], "job": [0, 20], "ha": [0, 5, 7, 11, 12, 14, 26, 31, 32, 33], "been": [0, 26, 32], "done": [0, 12, 13, 30], "human": [0, 5, 30], "an": [0, 3, 5, 6, 7, 8, 10, 12, 14, 20, 22, 23, 26, 30], "ipython": [0, 5], "termin": [0, 5, 17, 32, 33], "so": [0, 4, 5, 7, 12, 17, 20, 26, 32, 33], "requir": [0, 6, 12, 17, 20, 21, 22, 26, 29, 30, 32, 33], "autom": [0, 5], "maintain": [0, 12], "registri": [0, 6, 25], "plan": [0, 4, 5, 7, 15, 20, 27, 30, 31, 33], "devic": [0, 6, 7, 20, 24, 26, 27, 30, 31, 33], "In": [0, 3, 5, 6, 22, 24], "aforement": 0, "case": [0, 1, 5, 7, 22], "would": [0, 22], "have": [0, 7, 9, 10, 12, 15, 17, 18, 22, 24, 26, 33], "just": [0, 5, 10, 22], "global": [0, 6], "variabl": [0, 6, 12], "commun": [0, 12], "outsid": [0, 5, 26], "world": 0, "accept": [0, 2, 3, 4, 26, 29, 31], "run": [0, 3, 5, 6, 8, 9, 14, 15, 16, 17, 20, 22, 26, 27, 30, 31], "provid": [0, 14, 30], "updat": [0, 15, 29, 31], "progress": [0, 30], "etc": [0, 5, 26, 30], "These": [0, 5, 7, 17, 26], "respons": [0, 3, 30, 31], "ar": [0, 3, 5, 6, 7, 8, 9, 12, 16, 18, 21, 22, 23, 24, 25, 26, 31], "kept": [0, 3], "separ": 0, "codebas": 0, "ensur": [0, 12, 18], "clean": 0, "main": [0, 11, 20, 25], "hold": [0, 3, 6], "well": [0, 6, 10, 30], "helper": 0, "method": [0, 7, 26], "regist": [0, 6], "en": 0, "mass": 0, "from": [0, 2, 4, 5, 6, 7, 8, 15, 16, 18, 20, 22, 23, 24, 25, 26, 27, 30, 32, 33], "normal": 0, "python": [0, 4, 11, 14, 17, 22, 26], "modul": [0, 6, 14, 20, 22, 26], "wrap": [0, 20], "request": [0, 3, 7, 9, 14, 30, 31], "includ": [0, 4, 5, 6, 8, 22, 26, 27], "name": [0, 4, 5, 6, 7, 12, 22, 26, 29, 30, 31], "dictionari": [0, 7], "paramet": [0, 4, 6, 7, 24, 29, 31], "pass": [0, 6, 7, 23, 24, 26, 31], "valid": [0, 15, 26, 31], "against": [0, 6, 7, 12, 33], "known": [0, 7, 26, 30], "expect": [0, 7, 26, 30], "ani": [0, 3, 4, 6, 7, 8, 9, 10, 14, 22, 23, 26, 29, 30, 31, 32], "api": [0, 1, 3, 8, 16, 20, 22, 27, 29, 30], "layer": 0, "refer": [0, 6, 7, 21, 24, 26, 28, 29, 33], "can": [0, 3, 5, 6, 7, 8, 9, 10, 12, 13, 17, 18, 20, 22, 23, 24, 26, 30, 31, 32, 33], "interrog": 0, "messag": [0, 5, 6, 24, 26, 27], "reciev": [0, 30], "bu": [0, 6, 30], "It": [0, 6, 12, 13, 24, 32, 33], "also": [0, 5, 6, 7, 8, 9, 12, 15, 20, 22, 24, 27, 32, 33], "forward": [0, 12, 24], "variou": [0, 7, 30], "event": [0, 6, 15, 26, 29, 30, 33], "gener": [0, 6, 7, 11, 14, 20, 22, 26, 29, 30], "topic": [0, 21], "we": [1, 2, 3, 4, 5, 9, 26], "major": [1, 26], "adr": [1, 2], "describ": [1, 2, 30], "michael": [1, 2], "nygard": [1, 2], "below": [1, 5, 22, 26], "i": [1, 3, 4, 5, 6, 7, 9, 10, 12, 13, 14, 15, 16, 21, 22, 23, 24, 26, 27, 28, 30, 31, 32], "list": [1, 6, 7, 12, 26, 29, 30], "our": 1, "current": [1, 14, 29, 30, 31, 32], "1": [1, 6, 7, 16, 26], "2": [1, 16, 20, 30], "No": 1, "queue": [1, 6, 30], "model": [1, 5, 6, 7, 26, 30], "date": [2, 3, 4], "2022": 2, "02": 2, "18": 2, "need": [2, 18, 21, 22, 32], "made": [2, 22, 26], "project": [2, 8, 12, 14, 15, 22, 26], "us": [2, 5, 7, 15, 16, 17, 20, 22, 23, 25, 26, 29, 32, 33], "see": [2, 5, 7, 8, 11, 22, 26], "": [2, 5, 6, 7, 20, 26], "articl": 2, "link": [2, 15, 27], "abov": [2, 10, 22, 33], "To": [2, 11, 14, 17, 23, 25, 26, 33], "creat": [2, 7, 11, 22, 31], "new": [2, 7, 9, 11, 17, 22, 26, 27], "copi": 2, "past": 2, "exist": [2, 6, 9, 23, 32], "ones": [2, 4], "2023": [3, 4], "05": [3, 4], "22": 3, "ask": [3, 5, 9], "whether": [3, 4, 5, 30], "servic": [3, 6, 18, 20, 30, 33], "should": [3, 4, 7, 9, 22, 24, 26, 32, 33], "execut": [3, 29, 30], "The": [3, 4, 5, 6, 7, 8, 9, 10, 12, 16, 18, 20, 21, 22, 24, 26, 30, 31, 32, 33], "worker": [3, 6, 15, 27, 29, 30, 31], "one": [3, 9, 12, 21, 26], "time": [3, 5, 6, 7, 9, 10, 24, 26, 30], "return": [3, 6, 7, 16, 22, 26, 30, 31], "while": [3, 6, 9, 26], "anoth": 3, "differ": [3, 4, 5, 12, 21, 26], "must": [3, 5, 7, 22, 24, 26], "free": [3, 9, 22], "although": 3, "transact": 3, "permit": 3, "where": [3, 7, 13, 14, 20, 22, 23, 26, 30], "server": [3, 20, 24, 31], "cach": 3, "23": 4, "consid": [4, 16], "kei": [4, 6, 26], "json": [4, 6, 7, 10, 24, 26, 30], "blob": 4, "snake_cas": 4, "camelcas": 4, "which": [4, 5, 6, 8, 14, 17, 22, 23, 24, 26, 30, 31], "mai": [4, 6, 20, 22, 26, 31], "user": [4, 5, 6, 15, 20], "defin": [4, 7, 16, 22, 23, 26, 30], "prioriti": 4, "confus": 4, "alia": 4, "field": [4, 26], "most": [4, 9, 21], "code": [4, 5, 6, 8, 10, 17, 20, 31], "written": [4, 6, 26], "pep8": 4, "enforc": 4, "mean": [4, 14, 22], "some": [4, 22, 26], "add": [5, 20, 27], "top": 5, "sinc": [5, 30], "front": 5, "sometim": [5, 22], "assum": [5, 12, 15, 18, 33], "intuit": 5, "behaviour": [5, 12], "replac": [5, 7], "fill": 5, "gap": 5, "base": [5, 8, 26, 30], "engin": 5, "programat": 5, "data": [5, 6, 20, 26, 30, 33], "conform": [5, 16, 26], "meant": [5, 24], "other": [5, 6, 26, 30, 31], "subscrib": [5, 30], "e": [5, 6, 7, 8, 10, 12, 13, 17, 22, 26], "g": [5, 6, 7, 22, 26], "databrok": 5, "decoupl": 5, "concern": 5, "start": [5, 6, 27, 30], "finish": [5, 6, 24], "paus": [5, 30, 31], "exampl": [5, 7, 16, 20, 22, 23, 26], "sequenc": [5, 26], "emiss": 5, "compar": 5, "complic": 5, "note": [5, 11, 22, 24, 27], "between": [5, 6, 14, 26], "issu": [5, 13], "first": [5, 17, 22], "document": [5, 6, 8, 9, 15, 26, 27, 29, 30, 31], "similar": [5, 22], "stop": [5, 30, 31], "v": 5, "end": [5, 9, 30, 31], "thsse": 5, "typic": [5, 27], "setup": [5, 14, 17, 18, 33], "cleanup": 5, "produc": [5, 30], "arbitrari": [5, 24], "fine": 5, "becaus": [5, 7, 22], "when": [5, 6, 7, 9, 17, 26, 30], "associ": [5, 30], "For": [5, 7, 12, 16, 20, 22, 26], "introduc": 5, "set": [5, 7, 9, 10, 12, 16, 18, 22, 23, 26, 31], "specif": [5, 22, 26, 27, 33], "pertain": 5, "state": [5, 6, 7, 30, 31], "At": [5, 6, 7], "mimimum": 5, "everi": [5, 26], "complet": [5, 26, 30, 33], "fail": [5, 6, 12, 29], "latter": 5, "inform": [5, 9, 21, 31], "about": [5, 26, 27, 31, 33], "control": [5, 18, 20, 26, 27, 30, 33], "verifi": 5, "realli": 5, "relat": [5, 30], "you": [5, 8, 9, 10, 11, 12, 13, 15, 17, 18, 22, 23, 24, 26, 32, 33], "therefor": [5, 26], "bundl": 5, "contain": [5, 9, 12, 16, 17, 20, 22, 24, 27, 33], "microsoft": 5, "playbook": 5, "activemq": [5, 12, 18], "depend": [5, 25, 32], "protocol": [5, 6, 7, 22, 26, 30], "jm": 5, "jms_correlationid": 5, "stomp": [5, 12], "follow": [6, 9, 11, 16, 17, 18, 20, 22, 23, 26, 31], "demonstr": 6, "exactli": 6, "what": [6, 9, 22, 30], "doe": [6, 9, 12, 22, 26], "through": [6, 7, 9, 12, 17, 22, 31], "being": [6, 7, 30], "take": [6, 7, 17, 20, 26], "type": [6, 13, 15, 16, 17, 20, 22, 23, 30, 32], "import": [6, 16, 20, 22, 26], "map": [6, 22, 26], "option": [6, 11, 23, 26, 29], "union": 6, "bp": [6, 20, 26], "core": [6, 20, 22, 26], "msggener": [6, 20, 22, 26], "dls_bluesky_cor": 6, "inject": 6, "readabl": [6, 7, 22, 26, 30], "def": [6, 7, 16, 20, 22, 26], "count": [6, 7, 24, 26], "detector": [6, 7, 22, 24, 26], "det": 6, "default": [6, 12, 23, 24, 30, 31], "onli": [6, 7, 22, 26, 29], "num": [6, 7], "int": [6, 7, 16, 20, 22], "delai": [6, 7], "float": [6, 26, 30], "none": [6, 26, 29], "metadata": [6, 30], "str": [6, 7, 16, 20, 22, 26, 28], "n": 6, "read": [6, 15, 26], "collect": [6, 26, 30, 33], "arg": [6, 16, 26, 29], "fetch": [6, 26], "context": [6, 7, 26], "els": 6, "overriden": 6, "valu": [6, 12, 16, 22, 30], "export": [6, 12, 26, 33], "_description_": 6, "yield": [6, 20, 26], "iter": [6, 7, 26], "md": [6, 26], "configur": [6, 18, 26, 27, 29], "either": [6, 12, 17, 24], "blueskycontext": [6, 7], "go": [6, 11, 22], "all": [6, 7, 9, 10, 26, 31, 33], "them": [6, 7, 12, 13, 22, 26], "detect": [6, 20], "thei": [6, 7, 21, 22, 26, 30], "point": [6, 30], "inspect": [6, 29], "hint": [6, 16], "build": [6, 15, 16], "pydant": [6, 7, 23, 26], "word": 6, "someth": [6, 7, 9, 14], "like": [6, 7, 12, 22], "basemodel": [6, 7, 23, 26], "class": [6, 7], "countparamet": 6, "config": [6, 12, 23, 29, 33], "arbitrary_types_allow": 6, "true": [6, 16, 30, 31], "validate_al": 6, "illustr": 6, "purpos": [6, 12, 21, 22, 26], "actual": [6, 7], "object": [6, 7, 23, 26, 30], "resembl": 6, "construct": [6, 26], "memori": 6, "argument": [6, 29], "check": [6, 7, 9, 10, 12, 13, 14, 16, 17, 26], "until": [6, 24, 29, 30, 31], "store": 6, "On": 6, "A": [6, 22, 26, 30], "send": [6, 20], "form": [6, 7, 26], "look": [6, 7, 12, 22], "param": [6, 7], "andor": [6, 7], "pilatu": [6, 7], "3": [6, 7, 16, 17, 30, 32], "0": [6, 7, 24, 26, 30], "receiv": [6, 20], "intern": [6, 7, 28], "soon": 6, "earlier": 6, "function": [6, 12, 16, 21, 22, 26], "itself": 6, "out": [6, 20, 22, 26], "up": [6, 7, 9, 15, 18, 20, 22], "wa": [6, 7, 30], "publish": [6, 11, 30], "chang": [6, 8, 9, 10, 12, 14, 20, 30], "status": [6, 30], "within": [6, 22, 30], "motor": [6, 22, 26], "posit": [6, 26, 30], "emit": [6, 15], "If": [6, 8, 9, 10, 22, 26, 31, 32], "occur": 6, "dure": [6, 30], "stage": 6, "onward": 6, "sent": [6, 7, 30], "back": [6, 20], "over": [6, 7, 12, 22], "futur": 7, "my_plan": [7, 20, 22], "b": 7, "becom": [7, 22], "myplanmodel": 7, "That": 7, "wai": [7, 22, 27, 33], "pars": 7, "howev": [7, 23], "cover": 7, "doesn": 7, "t": [7, 9, 21, 29], "simpl": 7, "primit": [7, 26], "instead": [7, 9, 25, 26, 31], "ophyd": [7, 26, 30], "cannot": [7, 26], "network": 7, "string": [7, 30, 31], "repres": [7, 21, 30], "id": [7, 30], "suppos": 7, "load": [7, 22], "avail": [7, 12, 18, 22, 24, 25, 26, 29, 31], "signatur": [7, 16], "instanc": [7, 26, 33], "extend": [7, 16, 26], "origin": [7, 26, 30], "allow": [7, 30, 31], "deserialis": [7, 26], "correct": 7, "intermedi": 7, "process": [7, 8, 16], "never": [7, 26], "runtim": [7, 26], "fact": 7, "access": [7, 15, 24, 26, 27, 30], "via": [7, 18, 22, 27, 33], "closur": [7, 26], "circumv": 7, "usual": 7, "problem": 7, "abl": 7, "extern": [7, 30], "place": [7, 9, 22], "level": 7, "my_weird_plan": 7, "c": [7, 29], "dict": [7, 26], "d": 7, "directori": [8, 16, 22, 26], "tox": [8, 10, 12, 13, 17], "static": [8, 15, 16, 17], "pull": [8, 9, 14, 25], "docstr": [8, 16], "standard": [8, 9, 15, 22, 26], "built": [8, 25], "html": [8, 30], "open": [8, 9, 17, 26, 31], "local": [8, 17, 22], "web": 8, "brows": 8, "firefox": 8, "index": [8, 27], "watch": 8, "your": [8, 9, 18, 20, 23, 26, 27], "rebuild": 8, "whenev": 8, "reload": [8, 29], "browser": 8, "page": [8, 11, 16, 30, 31], "view": 8, "localhost": [8, 12, 24], "http": [8, 11, 14, 20, 30, 32], "8000": 8, "make": [8, 9, 15, 26], "sourc": [8, 13, 17, 18, 20, 22, 32], "too": 8, "tell": [8, 10, 24, 33], "src": [8, 23], "welcom": 9, "github": [9, 11, 14, 17, 20, 22, 25, 30, 32], "pleas": [9, 11, 16, 26], "befor": 9, "file": [9, 10, 13, 22, 23, 26, 29, 30, 33], "great": 9, "idea": 9, "involv": [9, 30], "big": 9, "ticket": 9, "want": 9, "sure": 9, "don": 9, "spend": 9, "might": 9, "fit": 9, "scope": 9, "offer": 9, "question": 9, "share": [9, 22], "obviou": 9, "close": [9, 14], "rais": 9, "100": 9, "librari": [9, 20, 22, 26, 27], "bug": 9, "significantli": 9, "reduc": 9, "easili": [9, 20], "caught": 9, "remain": [9, 30], "same": [9, 11], "improv": [9, 21], "environ": [9, 12, 15, 17, 24, 27, 29, 31], "test": [9, 15, 24], "black": [10, 16], "flake8": [10, 16], "isort": [10, 16], "under": [10, 17, 26], "command": [10, 18, 20, 23, 24, 27, 33], "Or": 10, "instal": [10, 12, 15, 18, 20, 22, 24, 25, 27, 33], "hook": 10, "each": [10, 22], "do": [10, 12, 13, 26], "git": [10, 14, 17, 32], "report": [10, 12], "reformat": 10, "repositori": [10, 16, 22], "likewis": 10, "get": [10, 11, 15, 17, 20, 25, 29, 31], "those": [10, 22, 26], "manual": 10, "formatt": 10, "save": [10, 29], "highlight": [10, 13], "editor": 10, "window": 10, "checklist": 11, "choos": [11, 17], "pep440": 11, "compliant": 11, "pep": 11, "org": [11, 30], "0440": 11, "draft": 11, "click": [11, 17, 18], "tag": 11, "suppli": [11, 30], "chose": 11, "review": 11, "edit": [11, 12, 22, 23], "titl": [11, 16, 30], "push": 11, "branch": 11, "effect": [11, 22], "except": [11, 26], "find": 12, "coverag": 12, "commandlin": [12, 32], "cov": 12, "xml": 12, "connect": 12, "live": 12, "broker": [12, 24], "present": 12, "inconveni": 12, "wish": [12, 23], "unrel": 12, "avoid": 12, "still": [12, 22], "ci": 12, "noth": 12, "slip": 12, "crack": 12, "support": [12, 22, 26], "rabbitmq": 12, "rabbitmq_stomp": 12, "plugin": 12, "61613": [12, 24], "host": [12, 17, 22, 24, 33], "port": 12, "stompconfig": 12, "py": [12, 23, 26], "blueapi_test_stomp_port": 12, "multipl": [12, 14, 20, 22, 26], "61614": [12, 24], "onc": 12, "per": [12, 22], "develop": [12, 20, 22, 24, 29], "outdat": 12, "unmaintain": 12, "imag": 12, "suffici": [12, 26], "alreadi": [12, 25], "recommend": [12, 32], "deploy": 12, "long": [12, 26], "term": 12, "8161": 12, "docker": [12, 25, 33], "p": [12, 17, 24], "rmohr": [12, 33], "As": [12, 16], "activ": [12, 17, 18, 31, 32], "packag": [12, 17, 22, 26], "helm": [12, 22], "chart": [12, 22], "enabl": [12, 26], "authent": 12, "15672": 12, "exec": 12, "definit": 13, "without": [13, 26], "potenti": 13, "match": 13, "merg": 14, "python3": [14, 17, 32], "pip": [14, 17, 20, 22, 24, 32], "skeleton": [14, 22], "structur": [14, 26, 30], "keep": [14, 30], "techniqu": 14, "sync": [14, 26], "latest": 14, "version": [14, 18, 25, 28, 29, 30], "rebas": 14, "fals": [14, 30, 31], "com": [14, 17, 30, 32], "diamondlightsourc": [14, 17, 20, 25, 30, 32], "conflict": [14, 31], "indic": [14, 30], "area": 14, "more": [14, 21, 22, 27], "detail": 14, "split": [15, 20, 27], "four": [15, 21, 27], "categori": [15, 27], "side": [15, 22, 27], "bar": [15, 20, 27], "debug": [15, 24], "contribut": [15, 20], "doc": [15, 16, 17, 30], "sphinx": [15, 16, 17], "pytest": [15, 17], "analysi": [15, 16, 17, 26], "mypi": [15, 16, 17], "lint": [15, 16, 17], "pre": [15, 16, 17, 25], "commit": [15, 16, 17], "tool": [15, 16, 22, 24], "releas": [15, 20, 25, 27, 32], "practic": [15, 27], "step": [15, 17, 22, 27], "dai": 15, "dev": [15, 17], "architectur": 15, "decis": 15, "record": 15, "lifecycl": 15, "why": [15, 27], "technic": [15, 21, 27], "materi": [15, 27], "format": [16, 30], "style": [16, 22, 30], "order": [16, 21], "how": [16, 21, 30], "guid": [16, 20, 21, 22], "napoleon": 16, "extens": 16, "googl": 16, "func": 16, "arg1": 16, "arg2": 16, "bool": 16, "summari": [16, 30], "line": [16, 18, 24, 27, 33], "descript": [16, 26, 30], "extract": 16, "underlin": 16, "convent": 16, "headl": 16, "head": 16, "minim": [17, 20, 24], "machin": [17, 22], "venv": [17, 18, 32], "9": [17, 32, 33], "later": [17, 30, 32], "vscode": [17, 18, 24], "virtualenv": 17, "cd": 17, "m": [17, 32], "bin": [17, 18, 32], "devcontain": 17, "reopen": 17, "prompt": 17, "graph": 17, "tree": 17, "pipdeptre": 17, "now": [17, 32], "parallel": 17, "insid": [18, 20, 22], "virtual": [18, 22], "cli": [18, 23, 27, 29, 33], "serv": [18, 33], "addit": [18, 26], "capabl": [18, 33], "navig": 18, "left": 18, "hand": 18, "menu": 18, "select": 18, "green": 18, "button": 18, "lightweight": 20, "wrapper": 20, "applic": [20, 22, 27, 30], "usabl": 20, "pypi": [20, 22], "io": [20, 25], "expos": [20, 26], "endpoint": [20, 31], "lab": 20, "peopl": 20, "equip": 20, "possibli": 20, "remot": 20, "locat": [20, 26], "premis": 20, "boilerpl": 20, "annot": [20, 22], "foo": [20, 22, 26], "scan": [20, 26, 30], "automat": [20, 22], "invok": 20, "few": 20, "rest": [20, 27, 29], "call": [20, 21, 23, 26, 31], "section": 20, "grand": 21, "unifi": 21, "theori": 21, "david": 21, "la": 21, "There": [21, 26], "secret": 21, "understood": 21, "write": [21, 23, 27], "good": 21, "softwar": [21, 22, 32], "isn": 21, "thing": 21, "tutori": [21, 22], "explan": 21, "approach": 21, "creation": 21, "understand": 21, "implic": 21, "help": 21, "often": [21, 26], "immens": 21, "custom": [22, 24, 33], "tailor": 22, "individu": 22, "experiment": 22, "ad": [22, 26], "both": 22, "relev": 22, "path": [22, 23, 29, 32, 33], "part": 22, "tweak": 22, "pyproject": 22, "toml": 22, "easiest": 22, "put": [22, 31], "mani": 22, "singl": [22, 26], "spread": 22, "movabl": [22, 26], "sample_nam": 22, "extra_metadata": 22, "logic": 22, "goe": 22, "here": [22, 27], "dodal": [22, 26], "factori": [22, 26], "mytypeofdetector": 22, "determin": 22, "pick": 22, "similarli": 22, "organ": 22, "prefer": 22, "my_facility_devic": 22, "my_detector": 22, "other_config": 22, "extra": 22, "preserv": 22, "own": [22, 23], "were": 22, "my_plan_librari": 22, "tomographi": 22, "env": 22, "kind": 22, "referenc": [22, 30], "initi": [22, 30], "particular": [22, 31], "my_lab": 22, "my_beamlin": 22, "planfunct": 22, "loop": 22, "filesystem": [22, 26], "chosen": 22, "mount": 22, "yaml": [22, 23, 29], "hostpath": 22, "dls_sw": 22, "clone": 22, "incorpor": 22, "startup": 22, "By": [23, 24, 31], "ingest": 23, "overrid": 23, "found": 23, "schema": [23, 26, 30], "applicationconfig": 23, "simpli": 23, "rel": 23, "Then": 23, "subsequ": 23, "child": 23, "come": [24, 33], "client": [24, 29, 30], "product": 24, "talk": 24, "tcp": 24, "h": 24, "my": 24, "sleep": 24, "5": [24, 26, 33], "current_det": 24, "image_det": 24, "block": 24, "statu": [24, 30, 31], "full": [24, 29, 33], "interfac": [24, 27, 32, 33], "ghcr": 25, "carefulli": 26, "risk": 26, "lose": 26, "incorrectli": 26, "introduct": 26, "advic": 26, "explain": 26, "sens": 26, "msg": 26, "distinguish": 26, "distinct": 26, "subset": 26, "alon": 26, "least": 26, "open_run": 26, "close_run": 26, "experi": 26, "plan_stub": 26, "plangener": 26, "minimum": 26, "input": 26, "broad": 26, "possibl": [26, 31], "implement": 26, "accomplish": 26, "drive": 26, "generalis": 26, "move_to_each_posit": 26, "axi": 26, "specificimplementationmov": 26, "_": 26, "rang": 26, "abs_set": 26, "formalis": 26, "bluesky_protocol": 26, "mostli": 26, "alwai": 26, "instanti": 26, "bypass": 26, "defer": [26, 29, 31], "touch_synchrotron": 26, "synchrotron": 26, "know": 26, "specific_funct": 26, "rich": 26, "attach": 26, "consist": 26, "encourag": 26, "final": 26, "empti": 26, "down": 26, "pass_metadata": 26, "x": [26, 30], "much": 26, "ascertain": 26, "unit": [26, 30], "second": [26, 29], "microsecond": 26, "temp_pressure_snapshot": 26, "temperatur": 26, "sample_temperatur": 26, "pressur": 26, "sample_pressur": 26, "target_temperatur": 26, "273": 26, "target_pressur": 26, "10": 26, "move": 26, "captur": 26, "frame": 26, "sampl": 26, "stp": 26, "target": [26, 30], "kelvin": 26, "pa": 26, "async": 26, "diamond": [26, 30], "common": 26, "absolut": 26, "onto": 26, "intend": 26, "begin": [26, 30], "attach_metadata": 26, "ophyd_async_snapshot": 26, "knowledg": 26, "snapshot": 26, "mayb": 26, "repeated_snapshot": 26, "inner_funct": 26, "factor": 26, "re": 26, "piec": 26, "nudg": 26, "wait": [26, 31], "consum": 26, "previou": [26, 31], "equival": 26, "condit": [26, 30], "__init__": 26, "__exports__": 26, "__all__": 26, "standalon": 26, "rehom": 26, "beamlin": 26, "rehome_devic": 26, "await": 26, "callback": 26, "await_callback": 26, "quickstart": 27, "usag": 27, "experienc": 27, "work": 27, "__version__": 28, "calcul": 28, "pypa": 28, "setuptools_scm": 28, "show": 29, "exit": 29, "util": 29, "introspect": 29, "mark": [29, 31], "ongo": 29, "reason": [29, 31], "restart": 29, "r": 29, "output": 29, "next": [29, 31], "checkpoint": [29, 31], "timeout": 29, "hang": 29, "forev": 29, "print": 29, "success": [29, 31], "o": 29, "u": 29, "track": 30, "channel": 30, "asyncapi": 30, "6": 30, "info": 30, "contact": 30, "callum": 30, "forrest": 30, "email": 30, "ac": 30, "uk": 30, "licens": 30, "apach": 30, "url": 30, "www": 30, "defaultcontenttyp": 30, "public": 30, "oper": 30, "operationid": 30, "dataev": 30, "oneof": 30, "ref": 30, "compon": 30, "workerstateev": 30, "workerprogressev": 30, "taggedstartdocu": 30, "taggeddescriptordocu": 30, "taggedeventdocu": 30, "taggedstopdocu": 30, "taggedresourcedocu": 30, "taggeddatumdocu": 30, "taggedresourcestream": 30, "taggeddatumstream": 30, "taggedeventpag": 30, "taggeddatumpag": 30, "todo": 30, "correlationid": 30, "bind": 30, "messageid": 30, "runstart": 30, "previous": 30, "specifi": 30, "header": 30, "contexthead": 30, "payload": 30, "properti": 30, "raw": 30, "githubusercont": 30, "master": 30, "event_model": 30, "run_start": 30, "runstop": 30, "run_stop": 30, "eventstreamdescriptor": 30, "scientif": 30, "stream": 30, "measur": 30, "event_descriptor": 30, "eventpag": 30, "deprec": 30, "event_pag": 30, "resourc": 30, "databas": 30, "entri": 30, "datum": 30, "datumpag": 30, "datum_pag": 30, "streamresourc": 30, "stream_resourc": 30, "streamdatum": 30, "slice": 30, "stream_datum": 30, "stateev": 30, "warn": 30, "workerst": 30, "taskstatu": 30, "arrai": 30, "item": 30, "progressev": 30, "tasknam": 30, "uniqu": [30, 31], "submit": [30, 31], "additionalproperti": 30, "statusview": 30, "destin": 30, "replydestin": 30, "temporari": 30, "caller": 30, "listen": 30, "identifi": 30, "exchang": 30, "enum": 30, "idl": 30, "halt": 30, "abort": [30, 31], "suspend": 30, "panick": 30, "unknown": 30, "taskcomplet": 30, "taskfail": 30, "reac": 30, "boolean": 30, "outcom": 30, "achiev": 30, "displaynam": 30, "precis": 30, "sensibl": 30, "displai": [30, 33], "integ": 30, "percentag": 30, "timeelaps": 30, "elaps": 30, "timeremain": 30, "estim": 30, "fastapi": 31, "interact": 31, "retriev": 31, "200": 31, "ok": 31, "422": 31, "unprocess": 31, "entiti": 31, "delet": 31, "post": 31, "201": 31, "task_id": 31, "transit": 31, "202": 31, "new_stat": 31, "resum": 31, "rewind": 31, "failur": 31, "400": 31, "bad": 31, "409": 31, "interfer": 32, "featur": 32, "act": 33, "laboratori": 33, "downstream": 33, "simplest": 33, "rm": 33, "net": 33, "15": 33, "alpin": 33, "podman": 33, "queri": 33}, "objects": {"": [[31, 0, 1, "get--devices", "/devices"], [31, 0, 1, "get--devices-name", "/devices/{name}"], [31, 1, 1, "delete--environment", "/environment"], [31, 0, 1, "get--environment", "/environment"], [31, 0, 1, "get--plans", "/plans"], [31, 0, 1, "get--plans-name", "/plans/{name}"], [31, 2, 1, "post--tasks", "/tasks"], [31, 1, 1, "delete--tasks-task_id", "/tasks/{task_id}"], [31, 0, 1, "get--tasks-task_id", "/tasks/{task_id}"], [31, 0, 1, "get--worker-state", "/worker/state"], [31, 3, 1, "put--worker-state", "/worker/state"], [31, 0, 1, "get--worker-task", "/worker/task"], [31, 3, 1, "put--worker-task", "/worker/task"], [28, 4, 0, "-", "blueapi"]], "blueapi.blueapi": [[28, 5, 1, "", "__version__"]], "blueapi-controller-abort": [[29, 6, 1, "cmdoption-blueapi-controller-abort-arg-REASON", "REASON"]], "blueapi-controller-env": [[29, 6, 1, "cmdoption-blueapi-controller-env-r", "--reload"], [29, 6, 1, "cmdoption-blueapi-controller-env-r", "-r"]], "blueapi-controller-pause": [[29, 6, 1, "cmdoption-blueapi-controller-pause-defer", "--defer"]], "blueapi-controller-run": [[29, 6, 1, "cmdoption-blueapi-controller-run-t", "--timeout"], [29, 6, 1, "cmdoption-blueapi-controller-run-t", "-t"], [29, 6, 1, "cmdoption-blueapi-controller-run-arg-NAME", "NAME"], [29, 6, 1, "cmdoption-blueapi-controller-run-arg-PARAMETERS", "PARAMETERS"]], "blueapi-schema": [[29, 6, 1, "cmdoption-blueapi-schema-o", "--output"], [29, 6, 1, "cmdoption-blueapi-schema-u", "--update"], [29, 6, 1, "cmdoption-blueapi-schema-o", "-o"], [29, 6, 1, "cmdoption-blueapi-schema-u", "-u"]], "blueapi": [[29, 6, 1, "cmdoption-blueapi-c", "--config"], [29, 6, 1, "cmdoption-blueapi-version", "--version"], [29, 6, 1, "cmdoption-blueapi-c", "-c"]]}, "objtypes": {"0": "http:get", "1": "http:delete", "2": "http:post", "3": "http:put", "4": "py:module", "5": "py:data", "6": "std:cmdoption"}, "objnames": {"0": ["http", "get", "HTTP get"], "1": ["http", "delete", "HTTP delete"], "2": ["http", "post", "HTTP post"], "3": ["http", "put", "HTTP put"], "4": ["py", "module", "Python module"], "5": ["py", "data", "Python data"], "6": ["std", "cmdoption", "program option"]}, "titleterms": {"architectur": [0, 1, 2], "kei": 0, "compon": 0, "The": 0, "blueskycontext": 0, "object": 0, "worker": [0, 5, 18, 24, 33], "servic": 0, "decis": [1, 2, 3, 4], "record": [1, 2], "1": 2, "statu": [2, 3, 4], "context": [2, 3, 4], "consequ": [2, 3, 4], "2": [3, 4], "No": 3, "queue": 3, "api": [4, 19, 28], "model": 4, "case": 4, "event": 5, "emit": 5, "reason": 5, "new": 5, "correl": 5, "id": 5, "header": 5, "lifecycl": 6, "plan": [6, 22, 24, 26, 29], "load": 6, "registr": 6, "startup": 6, "request": 6, "valid": [6, 7], "execut": 6, "type": [7, 26], "requir": 7, "solut": 7, "build": [8, 17], "doc": 8, "us": [8, 10, 12, 13], "sphinx": 8, "autobuild": 8, "contribut": 9, "project": 9, "issu": [9, 10], "discuss": 9, "code": [9, 16, 22], "coverag": 9, "develop": [9, 15, 17, 18], "guid": [9, 15, 27, 33], "run": [10, 12, 13, 18, 24, 25, 29, 33], "lint": 10, "pre": 10, "commit": 10, "fix": 10, "vscode": 10, "support": 10, "make": 11, "releas": 11, "test": [12, 17, 33], "pytest": 12, "skip": 12, "messag": [12, 30], "bu": 12, "configur": [12, 22, 23], "buss": 12, "static": 13, "analysi": 13, "mypi": 13, "updat": 14, "tool": 14, "tutori": [15, 27], "how": [15, 20, 27], "explan": [15, 27], "refer": [15, 27], "standard": 16, "document": [16, 20, 21], "instal": [17, 32], "clone": 17, "repositori": 17, "depend": 17, "see": 17, "what": 17, "wa": 17, "debug": 18, "environ": [18, 22, 32], "start": [18, 25, 33], "blueski": [18, 26], "index": 19, "blueapi": [20, 22, 26, 28, 29], "i": [20, 33], "structur": 20, "about": 21, "add": 22, "devic": [22, 29], "your": [22, 32], "home": 22, "format": 22, "scratch": 22, "area": 22, "kubernet": 22, "applic": 23, "control": [24, 29], "via": 24, "cli": 24, "basic": 24, "introspect": 24, "contain": 25, "write": 26, "annot": 26, "allow": 26, "argument": 26, "inject": 26, "default": 26, "metadata": 26, "docstr": 26, "decor": 26, "stub": 26, "user": 27, "command": 29, "line": 29, "interfac": 29, "abort": 29, "env": 29, "listen": 29, "paus": 29, "resum": 29, "state": 29, "stop": 29, "schema": 29, "serv": 29, "specif": [30, 31], "rest": 31, "check": 32, "version": 32, "python": 32, "creat": 32, "virtual": 32, "librari": 32, "quickstart": 33, "activemq": 33}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinx": 60}, "alltitles": {"Architecture": [[0, "architecture"]], "Key Components": [[0, "key-components"]], "The BlueskyContext Object": [[0, "the-blueskycontext-object"]], "The Worker Object": [[0, "the-worker-object"]], "The Service Object": [[0, "the-service-object"]], "Architectural Decision Records": [[1, "architectural-decision-records"]], "1. Record architecture decisions": [[2, "record-architecture-decisions"]], "Status": [[2, "status"], [3, "status"], [4, "status"]], "Context": [[2, "context"], [3, "context"], [4, "context"]], "Decision": [[2, "decision"], [3, "decision"], [4, "decision"]], "Consequences": [[2, "consequences"], [3, "consequences"], [4, "consequences"]], "2. No Queues": [[3, "no-queues"]], "2. API Model Case": [[4, "api-model-case"]], "Events Emitted by the Worker": [[5, "events-emitted-by-the-worker"]], "Reasons": [[5, "reasons"]], "New Events": [[5, "new-events"]], "Correlation ID": [[5, "correlation-id"]], "Correlation ID Headers": [[5, "id2"]], "Lifecycle of a Plan": [[6, "lifecycle-of-a-plan"]], "Loading and Registration": [[6, "loading-and-registration"]], "Startup": [[6, "startup"]], "Request": [[6, "request"]], "Validation": [[6, "validation"]], "Execution": [[6, "execution"]], "Type Validators": [[7, "type-validators"]], "Requirement": [[7, "requirement"]], "Solution": [[7, "solution"]], "Build the docs using sphinx": [[8, "build-the-docs-using-sphinx"]], "Autobuild": [[8, "autobuild"]], "Contributing to the project": [[9, "contributing-to-the-project"]], "Issue or Discussion?": [[9, "issue-or-discussion"]], "Code coverage": [[9, "code-coverage"]], "Developer guide": [[9, "developer-guide"]], "Run linting using pre-commit": [[10, "run-linting-using-pre-commit"]], "Running pre-commit": [[10, "running-pre-commit"]], "Fixing issues": [[10, "fixing-issues"]], "VSCode support": [[10, "vscode-support"]], "Make a release": [[11, "make-a-release"]], "Run the tests using pytest": [[12, "run-the-tests-using-pytest"]], "Skip the message bus tests": [[12, "skip-the-message-bus-tests"]], "Configure message busses": [[12, "configure-message-busses"]], "Run static analysis using mypy": [[13, "run-static-analysis-using-mypy"]], "Update the tools": [[14, "update-the-tools"]], "Developer Guide": [[15, "developer-guide"]], "Tutorials": [[15, null], [27, null]], "How-to Guides": [[15, null], [27, null]], "Explanations": [[15, null], [27, null]], "Reference": [[15, null], [27, null]], "Standards": [[16, "standards"]], "Code Standards": [[16, "code-standards"]], "Documentation Standards": [[16, "documentation-standards"]], "Developer install": [[17, "developer-install"]], "Clone the repository": [[17, "clone-the-repository"]], "Install dependencies": [[17, "install-dependencies"]], "See what was installed": [[17, "see-what-was-installed"]], "Build and test": [[17, "build-and-test"]], "Run/Debug in a Developer Environment": [[18, "run-debug-in-a-developer-environment"]], "Start Bluesky Worker": [[18, "start-bluesky-worker"]], "API Index": [[19, "api-index"]], "blueapi": [[20, "blueapi"], [28, "blueapi"], [29, "blueapi"]], "How the documentation is structured": [[20, "how-the-documentation-is-structured"]], "About the documentation": [[21, "about-the-documentation"]], "Add Plans and Devices to your Blueapi Environment": [[22, "add-plans-and-devices-to-your-blueapi-environment"]], "Home of Code": [[22, "home-of-code"]], "Format": [[22, "format"]], "Configuration": [[22, "configuration"]], "Scratch Area on Kubernetes": [[22, "scratch-area-on-kubernetes"]], "Configure the application": [[23, "configure-the-application"]], "Control the Worker via the CLI": [[24, "control-the-worker-via-the-cli"]], "Basic Introspection": [[24, "basic-introspection"]], "Running Plans": [[24, "running-plans"]], "Run in a container": [[25, "run-in-a-container"]], "Starting the container": [[25, "starting-the-container"]], "Writing Bluesky plans for Blueapi": [[26, "writing-bluesky-plans-for-blueapi"]], "Plans": [[26, "plans"]], "Type Annotations": [[26, "type-annotations"]], "Allowed Argument Types": [[26, "allowed-argument-types"]], "Injecting defaults": [[26, "injecting-defaults"]], "Metadata": [[26, "metadata"]], "Docstrings": [[26, "docstrings"]], "Decorators": [[26, "decorators"]], "Stubs": [[26, "stubs"]], "User Guide": [[27, "user-guide"]], "API": [[28, "module-blueapi"]], "Command-Line Interface": [[29, "command-line-interface"]], "controller": [[29, "blueapi-controller"]], "abort": [[29, "blueapi-controller-abort"]], "devices": [[29, "blueapi-controller-devices"]], "env": [[29, "blueapi-controller-env"]], "listen": [[29, "blueapi-controller-listen"]], "pause": [[29, "blueapi-controller-pause"]], "plans": [[29, "blueapi-controller-plans"]], "resume": [[29, "blueapi-controller-resume"]], "run": [[29, "blueapi-controller-run"]], "state": [[29, "blueapi-controller-state"]], "stop": [[29, "blueapi-controller-stop"]], "schema": [[29, "blueapi-schema"]], "serve": [[29, "blueapi-serve"]], "Messaging Specification": [[30, "messaging-specification"]], "REST Specification": [[31, "rest-specification"]], "Installation": [[32, "installation"]], "Check your version of python": [[32, "check-your-version-of-python"]], "Create a virtual environment": [[32, "create-a-virtual-environment"]], "Installing the library": [[32, "installing-the-library"]], "Quickstart Guide": [[33, "quickstart-guide"]], "Start ActiveMQ": [[33, "start-activemq"]], "Start Worker": [[33, "start-worker"]], "Test that the Worker is Running": [[33, "test-that-the-worker-is-running"]]}, "indexentries": {"blueapi": [[28, "module-blueapi"]], "blueapi.__version__ (in module blueapi)": [[28, "blueapi.blueapi.__version__"]], "module": [[28, "module-blueapi"]], "--config": [[29, "cmdoption-blueapi-c"]], "--defer": [[29, "cmdoption-blueapi-controller-pause-defer"]], "--output": [[29, "cmdoption-blueapi-schema-o"]], "--reload": [[29, "cmdoption-blueapi-controller-env-r"]], "--timeout": [[29, "cmdoption-blueapi-controller-run-t"]], "--update": [[29, "cmdoption-blueapi-schema-u"]], "--version": [[29, "cmdoption-blueapi-version"]], "-c": [[29, "cmdoption-blueapi-c"]], "-o": [[29, "cmdoption-blueapi-schema-o"]], "-r": [[29, "cmdoption-blueapi-controller-env-r"]], "-t": [[29, "cmdoption-blueapi-controller-run-t"]], "-u": [[29, "cmdoption-blueapi-schema-u"]], "name": [[29, "cmdoption-blueapi-controller-run-arg-NAME"]], "parameters": [[29, "cmdoption-blueapi-controller-run-arg-PARAMETERS"]], "reason": [[29, "cmdoption-blueapi-controller-abort-arg-REASON"]], "blueapi command line option": [[29, "cmdoption-blueapi-c"], [29, "cmdoption-blueapi-version"]], "blueapi-controller-abort command line option": [[29, "cmdoption-blueapi-controller-abort-arg-REASON"]], "blueapi-controller-env command line option": [[29, "cmdoption-blueapi-controller-env-r"]], "blueapi-controller-pause command line option": [[29, "cmdoption-blueapi-controller-pause-defer"]], "blueapi-controller-run command line option": [[29, "cmdoption-blueapi-controller-run-arg-NAME"], [29, "cmdoption-blueapi-controller-run-arg-PARAMETERS"], [29, "cmdoption-blueapi-controller-run-t"]], "blueapi-schema command line option": [[29, "cmdoption-blueapi-schema-o"], [29, "cmdoption-blueapi-schema-u"]]}})